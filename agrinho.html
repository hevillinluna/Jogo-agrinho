<!DOCTYPE html>
<html lang="pt-BR">
<audio id="start-sound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_5a5f67b61d.mp3"></audio>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unindo e Aprendendo sobre o campo e a cidade!</title>
  <style>
    body {
      background: url('https://thumbs.dreamstime.com/z/cidade-e-campo-29325364.jpg') no-repeat center center fixed;
      background-color: #d3baa2;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      text-align: center;
      color: #333;
    }

    #question-container {
      margin-top: 30px;
    }

    #question {
      font-size: 1.3rem;
      margin-bottom: 15px;
    }

    .answer-btn {
      display: inline-block;
      margin: 8px 10px;
      padding: 10px 20px;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      background-color: #d2f5c4;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .answer-btn:hover:not(:disabled) {
      background-color: #a5e59c;
    }

    #resultado {
      margin-top: 20px;
      font-weight: bold;
      min-height: 70px;
    }

    #timer {
      font-size: 1.2rem;
      font-weight: bold;
      margin-top: 15px;
    }

    #score {
      margin-top: 20px;
      font-size: 1.2rem;
    }

    #start-screen {
      margin-top: 100px;
    }

    #start-screen button {
      padding: 15px 35px;
      font-size: 1.3rem;
      border-radius: 12px;
      border: none;
      background-color: #6cc070;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    #start-screen button:hover {
      background-color: #4a8c44;
    }
  </style>
</head>

<body>
  <div id="start-screen">
    <h1>ðŸŒ± Bem-vindo ao jogo!</h1>
    <p>Vamos aprender um pouco sobre a conexÃ£o entre o campo e a cidade.</p>
    <button id="start-btn">Iniciar</button>
  </div>

  <div id="ranking" style="display:none;">
    <h3>Ranking</h3>
    <ul id="ranking-list"></ul>
    <input type="text" id="player-name" placeholder="Digite seu nome" />
    <button id="submit-score">Enviar PontuaÃ§Ã£o</button>
  </div>

  <div id="game-container" style="display:none;">
    <div id="score">PontuaÃ§Ã£o: 0</div>
    <div id="timer">Tempo restante: 60s</div>
    <div id="question-container">
      <div id="question">Carregando pergunta...</div>
      <div id="answers"></div>
    </div>
    <div id="resultado"></div>
    <button id="restart-btn" style="display:none;">Reiniciar Jogo</button>
  </div>

  <script>
    const perguntas = [
      // Fase 1 - FÃ¡cil
      {
        pergunta: "Qual Ã© o principal fator que afeta a biodiversidade em Ã¡reas urbanas?",
        opcoes: ["PoluiÃ§Ã£o sonora", "FragmentaÃ§Ã£o do habitat", "IluminaÃ§Ã£o pÃºblica", "TrÃ¢nsito de veÃ­culos"],
        respostaCorreta: 1,
        justificativa: "A fragmentaÃ§Ã£o do habitat interrompe corredores naturais, dificultando o fluxo e a sobrevivÃªncia das espÃ©cies."
      },
      {
        pergunta: "Qual tÃ©cnica agrÃ­cola Ã© mais eficiente para conservaÃ§Ã£o do solo em terrenos inclinados?",
        opcoes: ["Plantio direto", "RotaÃ§Ã£o de culturas", "TerraÃ§os", "Queima controlada"],
        respostaCorreta: 2,
        justificativa: "Os terraÃ§os reduzem a velocidade da Ã¡gua da chuva, prevenindo erosÃ£o e preservando o solo."
      },
      {
        pergunta: "Qual Ã© a principal vantagem da agricultura orgÃ¢nica?",
        opcoes: ["Uso de fertilizantes sintÃ©ticos", "Maior produtividade imediata", "PreservaÃ§Ã£o da saÃºde do solo", "Uso intensivo de pesticidas"],
        respostaCorreta: 2,
        justificativa: "A agricultura orgÃ¢nica prioriza a saÃºde do solo, evitando produtos quÃ­micos sintÃ©ticos."
      },
      {
        pergunta: "O que caracteriza a agricultura familiar?",
        opcoes: ["Uso intensivo de mÃ¡quinas", "Pequena escala e trabalho familiar", "ProduÃ§Ã£o exclusivamente para exportaÃ§Ã£o", "Uso exclusivo de sementes modificadas"],
        respostaCorreta: 1,
        justificativa: "A agricultura familiar Ã© caracterizada pela pequena escala e o trabalho desenvolvido pela prÃ³pria famÃ­lia."
      },
      {
        pergunta: "Qual Ã© o principal produto agrÃ­cola do Brasil?",
        opcoes: ["Trigo", "Soja", "CafÃ©", "Milho"],
        respostaCorreta: 1,
        justificativa: "A soja Ã© o principal produto agrÃ­cola do Brasil devido Ã  sua ampla produÃ§Ã£o e exportaÃ§Ã£o."
      },

      // Fase 2 - MÃ©dio
      {
        pergunta: "Qual a importÃ¢ncia do corredor ecolÃ³gico na zona rural?",
        opcoes: ["Aumentar Ã¡rea de cultivo", "Conectar habitats para fauna", "Construir estradas", "Proteger Ã¡reas urbanas"],
        respostaCorreta: 1,
        justificativa: "Corredores ecolÃ³gicos conectam habitats, permitindo a movimentaÃ§Ã£o da fauna e preservaÃ§Ã£o da biodiversidade."
      },
      {
        pergunta: "Qual tÃ©cnica Ã© usada para evitar a erosÃ£o do solo causada pela Ã¡gua?",
        opcoes: ["Queimada controlada", "TerraÃ§os", "Uso de pesticidas", "IrrigaÃ§Ã£o por aspersÃ£o"],
        respostaCorreta: 1,
        justificativa: "Os terraÃ§os diminuem a velocidade da Ã¡gua e ajudam a prevenir a erosÃ£o do solo."
      },
      {
        pergunta: "Qual o principal desafio da agricultura no cerrado brasileiro?",
        opcoes: ["Solo Ã¡cido e pobre em nutrientes", "Excesso de Ã¡gua", "Clima frio", "Falta de mÃ£o de obra"],
        respostaCorreta: 0,
        justificativa: "O solo do cerrado Ã© Ã¡cido e pobre em nutrientes, exigindo tÃ©cnicas especÃ­ficas para agricultura."
      },
      {
        pergunta: "O que Ã© rotaÃ§Ã£o de culturas?",
        opcoes: ["Cultivar a mesma planta sempre", "Alternar diferentes culturas no mesmo solo", "Usar fertilizantes sintÃ©ticos", "Plantar somente uma cultura por ano"],
        respostaCorreta: 1,
        justificativa: "RotaÃ§Ã£o de culturas Ã© a alternÃ¢ncia de diferentes plantas para melhorar a fertilidade e reduzir pragas."
      },
      {
        pergunta: "Qual Ã© o impacto da urbanizaÃ§Ã£o sobre o uso do solo?",
        opcoes: ["Aumenta Ã¡reas agrÃ­colas", "Reduz Ã¡reas naturais e agrÃ­colas", "NÃ£o altera o uso do solo", "Melhora a biodiversidade"],
        respostaCorreta: 1,
        justificativa: "A urbanizaÃ§Ã£o reduz Ã¡reas naturais e agrÃ­colas, substituindo-as por construÃ§Ãµes e infraestrutura."
      },

      // Fase 3 - DifÃ­cil
      {
        pergunta: "Qual o papel das agroflorestas na sustentabilidade agrÃ­cola?",
        opcoes: ["Substituir florestas nativas", "Combinar Ã¡rvores com agricultura para conservar solo", "Eliminar pragas com inseticidas", "Aumentar o uso de mÃ¡quinas"],
        respostaCorreta: 1,
        justificativa: "Agroflorestas combinam Ã¡rvores e culturas agrÃ­colas, ajudando na conservaÃ§Ã£o do solo e biodiversidade."
      },
      {
        pergunta: "O que Ã© agricultura de precisÃ£o?",
        opcoes: ["Uso de tecnologia para otimizar recursos", "Cultivo sem Ã¡gua", "Uso de sementes modificadas apenas", "Agricultura sem fertilizantes"],
        respostaCorreta: 0,
        justificativa: "Agricultura de precisÃ£o utiliza tecnologia para monitorar e gerenciar recursos, aumentando eficiÃªncia."
      },
      {
        pergunta: "Qual o efeito da monocultura intensiva no solo?",
        opcoes: ["Aumenta fertilidade", "Pode causar esgotamento de nutrientes", "Reduz erosÃ£o", "Melhora biodiversidade"],
        respostaCorreta: 1,
        justificativa: "Monocultura intensiva pode esgotar nutrientes do solo, reduzindo sua qualidade."
      },
      {
        pergunta: "Por que Ã© importante conservar Ã¡reas de vegetaÃ§Ã£o nativa no entorno de propriedades rurais?",
        opcoes: ["Para expansÃ£o agrÃ­cola", "Para manter a biodiversidade e proteger recursos hÃ­dricos", "Para construÃ§Ã£o de casas", "Para uso industrial"],
        respostaCorreta: 1,
        justificativa: "A conservaÃ§Ã£o mantÃ©m biodiversidade, regula o ciclo da Ã¡gua e protege o solo."
      },
      {
        pergunta: "O que Ã© plantio direto?",
        opcoes: ["Queimar a vegetaÃ§Ã£o antes de plantar", "Plantio sem revolver o solo", "Uso intensivo de mÃ¡quinas pesadas", "RotaÃ§Ã£o de culturas anual"],
        respostaCorreta: 1,
        justificativa: "Plantio direto preserva a estrutura do solo evitando erosÃ£o e perda de nutrientes."
      }

    ];

    let posicaoAtual = 0;
    let pontuacao = 0;
    let tempoRestante = 60;
    let acertos = 0;
    let erros = 0;
    let pulos = 0;
    let timerInterval;

    const startBtn = document.getElementById("start-btn");
    const startScreen = document.getElementById("start-screen");
    const gameContainer = document.getElementById("game-container");
    const questionEl = document.getElementById("question");
    const answersEl = document.getElementById("answers");
    const resultadoEl = document.getElementById("resultado");
    const timerEl = document.getElementById("timer");
    const scoreEl = document.getElementById("score");
    const restartBtn = document.getElementById("restart-btn");
    const rankingList = document.getElementById("ranking-list");
    const playerNameInput = document.getElementById("player-name");
    const submitScoreBtn = document.getElementById("submit-score");

    startBtn.addEventListener("click", () => {
      document.getElementById("start-sound").play();
      startScreen.style.display = "none";
      gameContainer.style.display = "block";
      iniciarPergunta();
    });

    restartBtn.addEventListener("click", iniciarJogo);

    function iniciarJogo() {
      // Esconder o ranking quando reiniciar o jogo
      document.getElementById("ranking").style.display = "none";
      startScreen.style.display = "none";
      gameContainer.style.display = "block";

      posicaoAtual = 0;
      pontuacao = 0;
      acertos = 0;
      erros = 0;
      pulos = 0;
      scoreEl.textContent = "PontuaÃ§Ã£o: 0";
      resultadoEl.innerHTML = "";
      restartBtn.style.display = "none";
      iniciarPergunta();
    }

    function iniciarPergunta() {
      resultadoEl.innerHTML = "";
      tempoRestante = 60;
      atualizarTimer();
      startTimer();

      const atual = perguntas[posicaoAtual];
      questionEl.textContent = atual.pergunta;

      answersEl.innerHTML = "";
      atual.opcoes.forEach((opcao, i) => {
        const btn = document.createElement("button");
        btn.textContent = opcao;
        btn.classList.add("answer-btn");
        btn.disabled = false;
        btn.addEventListener("click", () => responderPergunta(i));
        answersEl.appendChild(btn);
      });
    }

    function startTimer() {
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        tempoRestante--;
        atualizarTimer();

        if (tempoRestante <= 0) {
          clearInterval(timerInterval);
          bloquearRespostas();
          resultadoEl.innerHTML = `<p>Tempo esgotado! VocÃª nÃ£o ganhou nem perdeu pontos.</p><p><em>Justificativa:</em> ${perguntas[posicaoAtual].justificativa}</p>`;
          pulos++;
          setTimeout(avancarPergunta, 3000);
        }
      }, 1000);
    }

    function atualizarTimer() {
      timerEl.textContent = `Tempo restante: ${tempoRestante}s`;
    }

    function bloquearRespostas() {
      const botoes = document.querySelectorAll(".answer-btn");
      botoes.forEach(btn => btn.disabled = true);
    }

    function responderPergunta(indiceEscolhido) {
      clearInterval(timerInterval);
      bloquearRespostas();

      const atual = perguntas[posicaoAtual];
      const acertou = indiceEscolhido === atual.respostaCorreta;

      if (acertou) {
        pontuacao += 10;
        acertos++;
        resultadoEl.innerHTML = `<p>VocÃª acertou! ParabÃ©ns!</p><p><em>Justificativa:</em> ${atual.justificativa}</p>`;
      } else {
        pontuacao -= 10;
        erros++;
        resultadoEl.innerHTML = `<p>VocÃª errou.</p><p><em>Justificativa:</em> ${atual.justificativa}</p>`;
      }
      scoreEl.textContent = `PontuaÃ§Ã£o: ${pontuacao}`;

      setTimeout(avancarPergunta, 3000);
    }

    function avancarPergunta() {
      posicaoAtual++;
      if (posicaoAtual >= perguntas.length) {
        finalizarJogo();
      } else {
        iniciarPergunta();
      }
    }

    function finalizarJogo() {
      questionEl.textContent = "";
      answersEl.innerHTML = "";
      timerEl.textContent = "";

      resultadoEl.innerHTML = `
        <h2>Fim do jogo!</h2>
        <p>Sua pontuaÃ§Ã£o final foi: ${pontuacao}</p>
        <p>VocÃª acertou <strong>${acertos}</strong> de ${perguntas.length} perguntas.</p>
        <p>Erros: <strong>${erros}</strong></p>
        <p>Tempo esgotado em: <strong>${pulos}</strong> perguntas.</p>
      `;
      restartBtn.style.display = "inline-block"; // Mostrar botÃ£o para reiniciar

      // Exibir o ranking
      showRanking(); // Chama a funÃ§Ã£o para mostrar o ranking
    }

    function saveScore(playerName, score) {
      let ranking = JSON.parse(localStorage.getItem("ranking")) || [];
      ranking.push({ name: playerName, score });
      ranking.sort((a, b) => b.score - a.score); // Ordenando do maior para o menor
      localStorage.setItem("ranking", JSON.stringify(ranking));
      showRanking();
    }

    function showRanking() {
      const ranking = JSON.parse(localStorage.getItem("ranking")) || [];
      rankingList.innerHTML = ""; // Limpar a lista de ranking atual
      ranking.forEach((player, index) => {
        const li = document.createElement("li");
        li.textContent = `${index + 1}. ${player.name} - ${player.score} pontos`;
        rankingList.appendChild(li);
      });
      document.getElementById("ranking").style.display = "block"; // Exibir o ranking
    }

    submitScoreBtn.addEventListener("click", () => {
      const playerName = playerNameInput.value.trim();
      if (playerName) {
        saveScore(playerName, pontuacao);
      } else {
        alert("Por favor, insira seu nome.");
      }
    });
  </script>
</body>

</html>
