<!DOCTYPE html>
<html lang="pt-BR">
<audio id="start-sound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_5a5f67b61d.mp3"></audio>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unindo e Aprendendo sobre o campo e a cidade!</title>
  <style>
    body {
      background: url('https://thumbs.dreamstime.com/z/cidade-e-campo-29325364.jpg') no-repeat center center fixed;
      background-color: #d3baa2;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      text-align: center;
      color: #333;
    }

    #question-container {
      margin-top: 30px;
    }

    #question {
      font-size: 1.3rem;
      margin-bottom: 15px;
    }

    .answer-btn {
      display: inline-block;
      margin: 8px 10px;
      padding: 10px 20px;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      background-color: #d2f5c4;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .answer-btn:hover:not(:disabled) {
      background-color: #a5e59c;
    }

    #resultado {
      margin-top: 20px;
      font-weight: bold;
      min-height: 70px;
    }

    #timer {
      font-size: 1.2rem;
      font-weight: bold;
      margin-top: 15px;
    }

    #score {
      margin-top: 20px;
      font-size: 1.2rem;
    }

    #start-screen {
      margin-top: 100px;
    }

    #start-screen button {
      padding: 15px 35px;
      font-size: 1.3rem;
      border-radius: 12px;
      border: none;
      background-color: #6cc070;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    #start-screen button:hover {
      background-color: #4a8c44;
    }
  </style>
</head>

<body>
  <div id="start-screen">
    <h1>üå± Bem-vindo ao jogo!</h1>
    <p>Vamos aprender um pouco sobre a conex√£o entre o campo e a cidade.</p>
    <button id="start-btn">Iniciar</button>
  </div>

  <div id="ranking" style="display:none;">
    <h3>Ranking</h3>
    <ul id="ranking-list"></ul>
    <input type="text" id="player-name" placeholder="Digite seu nome" />
    <button id="submit-score">Enviar Pontua√ß√£o</button>
  </div>

  <div id="game-container" style="display:none;">
    <div id="score">Pontua√ß√£o: 0</div>
    <div id="timer">Tempo restante: 60s</div>
    <div id="question-container">
      <div id="question">Carregando pergunta...</div>
      <div id="answers"></div>
    </div>
    <div id="resultado"></div>
    <button id="restart-btn" style="display:none;">Reiniciar Jogo</button>
  </div>

  <script>
    const perguntas = [
      // Fase 1 - F√°cil
      {
        pergunta: "Qual √© o principal fator que afeta a biodiversidade em √°reas urbanas?",
        opcoes: ["Polui√ß√£o sonora", "Fragmenta√ß√£o do habitat", "Ilumina√ß√£o p√∫blica", "Tr√¢nsito de ve√≠culos"],
        respostaCorreta: 1,
        justificativa: "A fragmenta√ß√£o do habitat interrompe corredores naturais, dificultando o fluxo e a sobreviv√™ncia das esp√©cies."
      },
      {
        pergunta: "Qual t√©cnica agr√≠cola √© mais eficiente para conserva√ß√£o do solo em terrenos inclinados?",
        opcoes: ["Plantio direto", "Rota√ß√£o de culturas", "Terra√ßos", "Queima controlada"],
        respostaCorreta: 2,
        justificativa: "Os terra√ßos reduzem a velocidade da √°gua da chuva, prevenindo eros√£o e preservando o solo."
      },
      {
        pergunta: "Qual √© a principal vantagem da agricultura org√¢nica?",
        opcoes: ["Uso de fertilizantes sint√©ticos", "Maior produtividade imediata", "Preserva√ß√£o da sa√∫de do solo", "Uso intensivo de pesticidas"],
        respostaCorreta: 2,
        justificativa: "A agricultura org√¢nica prioriza a sa√∫de do solo, evitando produtos qu√≠micos sint√©ticos."
      },
      {
        pergunta: "O que caracteriza a agricultura familiar?",
        opcoes: ["Uso intensivo de m√°quinas", "Pequena escala e trabalho familiar", "Produ√ß√£o exclusivamente para exporta√ß√£o", "Uso exclusivo de sementes modificadas"],
        respostaCorreta: 1,
        justificativa: "A agricultura familiar √© caracterizada pela pequena escala e o trabalho desenvolvido pela pr√≥pria fam√≠lia."
      },
      {
        pergunta: "Qual √© o principal produto agr√≠cola do Brasil?",
        opcoes: ["Trigo", "Soja", "Caf√©", "Milho"],
        respostaCorreta: 1,
        justificativa: "A soja √© o principal produto agr√≠cola do Brasil devido √† sua ampla produ√ß√£o e exporta√ß√£o."
      },

      // Fase 2 - M√©dio
      {
        pergunta: "Qual a import√¢ncia do corredor ecol√≥gico na zona rural?",
        opcoes: ["Aumentar √°rea de cultivo", "Conectar habitats para fauna", "Construir estradas", "Proteger √°reas urbanas"],
        respostaCorreta: 1,
        justificativa: "Corredores ecol√≥gicos conectam habitats, permitindo a movimenta√ß√£o da fauna e preserva√ß√£o da biodiversidade."
      },
      {
        pergunta: "Qual t√©cnica √© usada para evitar a eros√£o do solo causada pela √°gua?",
        opcoes: ["Queimada controlada", "Terra√ßos", "Uso de pesticidas", "Irriga√ß√£o por aspers√£o"],
        respostaCorreta: 1,
        justificativa: "Os terra√ßos diminuem a velocidade da √°gua e ajudam a prevenir a eros√£o do solo."
      },
      {
        pergunta: "Qual o principal desafio da agricultura no cerrado brasileiro?",
        opcoes: ["Solo √°cido e pobre em nutrientes", "Excesso de √°gua", "Clima frio", "Falta de m√£o de obra"],
        respostaCorreta: 0,
        justificativa: "O solo do cerrado √© √°cido e pobre em nutrientes, exigindo t√©cnicas espec√≠ficas para agricultura."
      },
      {
        pergunta: "O que √© rota√ß√£o de culturas?",
        opcoes: ["Cultivar a mesma planta sempre", "Alternar diferentes culturas no mesmo solo", "Usar fertilizantes sint√©ticos", "Plantar somente uma cultura por ano"],
        respostaCorreta: 1,
        justificativa: "Rota√ß√£o de culturas √© a altern√¢ncia de diferentes plantas para melhorar a fertilidade e reduzir pragas."
      },
      {
        pergunta: "Qual √© o impacto da urbaniza√ß√£o sobre o uso do solo?",
        opcoes: ["Aumenta √°reas agr√≠colas", "Reduz √°reas naturais e agr√≠colas", "N√£o altera o uso do solo", "Melhora a biodiversidade"],
        respostaCorreta: 1,
        justificativa: "A urbaniza√ß√£o reduz √°reas naturais e agr√≠colas, substituindo-as por constru√ß√µes e infraestrutura."
      },

      // Fase 3 - Dif√≠cil
      {
        pergunta: "Qual o papel das agroflorestas na sustentabilidade agr√≠cola?",
        opcoes: ["Substituir florestas nativas", "Combinar √°rvores com agricultura para conservar solo", "Eliminar pragas com inseticidas", "Aumentar o uso de m√°quinas"],
        respostaCorreta: 1,
        justificativa: "Agroflorestas combinam √°rvores e culturas agr√≠colas, ajudando na conserva√ß√£o do solo e biodiversidade."
      },
      {
        pergunta: "O que √© agricultura de precis√£o?",
        opcoes: ["Uso de tecnologia para otimizar recursos", "Cultivo sem √°gua", "Uso de sementes modificadas apenas", "Agricultura sem fertilizantes"],
        respostaCorreta: 0,
        justificativa: "Agricultura de precis√£o utiliza tecnologia para monitorar e gerenciar recursos, aumentando efici√™ncia."
      },
      {
        pergunta: "Qual o efeito da monocultura intensiva no solo?",
        opcoes: ["Aumenta fertilidade", "Pode causar esgotamento de nutrientes", "Reduz eros√£o", "Melhora biodiversidade"],
        respostaCorreta: 1,
        justificativa: "Monocultura intensiva pode esgotar nutrientes do solo, reduzindo sua qualidade."
      },
      {
        pergunta: "Por que √© importante conservar √°reas de vegeta√ß√£o nativa no entorno de propriedades rurais?",
        opcoes: ["Para expans√£o agr√≠cola", "Para manter a biodiversidade e proteger recursos h√≠dricos", "Para constru√ß√£o de casas", "Para uso industrial"],
        respostaCorreta: 1,
        justificativa: "A conserva√ß√£o mant√©m biodiversidade, regula o ciclo da √°gua e protege o solo."
      },
      {
        pergunta: "O que √© plantio direto?",
        opcoes: ["Queimar a vegeta√ß√£o antes de plantar", "Plantio sem revolver o solo", "Uso intensivo de m√°quinas pesadas", "Rota√ß√£o de culturas anual"],
        respostaCorreta: 1,
        justificativa: "Plantio direto preserva a estrutura do solo evitando eros√£o e perda de nutrientes."
      }

    ];

    let posicaoAtual = 0;
    let pontuacao = 0;
    let tempoRestante = 60;
    let acertos = 0;
    let erros = 0;
    let pulos = 0;
    let timerInterval;

    const startBtn = document.getElementById("start-btn");
    const startScreen = document.getElementById("start-screen");
    const gameContainer = document.getElementById("game-container");
    const questionEl = document.getElementById("question");
    const answersEl = document.getElementById("answers");
    const resultadoEl = document.getElementById("resultado");
    const timerEl = document.getElementById("timer");
    const scoreEl = document.getElementById("score");
    const restartBtn = document.getElementById("restart-btn");
    const rankingList = document.getElementById("ranking-list");
    const playerNameInput = document.getElementById("player-name");
    const submitScoreBtn = document.getElementById("submit-score");

    startBtn.addEventListener("click", () => {
      document.getElementById("start-sound").play();
      startScreen.style.display = "none";
      gameContainer.style.display = "block";
      iniciarPergunta();
    });

    restartBtn.addEventListener("click", iniciarJogo);

    function iniciarJogo() {
      // Esconder o ranking quando reiniciar o jogo
      document.getElementById("ranking").style.display = "none";
      startScreen.style.display = "none";
      gameContainer.style.display = "block";

      posicaoAtual = 0;
      pontuacao = 0;
      acertos = 0;
      erros = 0;
      pulos = 0;
      scoreEl.textContent = "Pontua√ß√£o: 0";
      resultadoEl.innerHTML = "";
      restartBtn.style.display = "none";
      iniciarPergunta();
    }

    function iniciarPergunta() {
      resultadoEl.innerHTML = "";
      tempoRestante = 60;
      atualizarTimer();
      startTimer();

      const atual = perguntas[posicaoAtual];
      questionEl.textContent = atual.pergunta;

      answersEl.innerHTML = "";
      atual.opcoes.forEach((opcao, i) => {
        const btn = document.createElement("button");
        btn.textContent = opcao;
        btn.classList.add("answer-btn");
        btn.disabled = false;
        btn.addEventListener("click", () => responderPergunta(i));
        answersEl.appendChild(btn);
      });
    }

    function startTimer() {
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        tempoRestante--;
        atualizarTimer();

        if (tempoRestante <= 0) {
          clearInterval(timerInterval);
          bloquearRespostas();
          resultadoEl.innerHTML = `<p>Tempo esgotado! Voc√™ n√£o ganhou nem perdeu pontos.</p><p><em>Justificativa:</em> ${perguntas[posicaoAtual].justificativa}</p>`;
          pulos++;
          setTimeout(avancarPergunta, 3000);
        }
      }, 1000);
    }

    function atualizarTimer() {
      timerEl.textContent = `Tempo restante: ${tempoRestante}s`;
    }

    function bloquearRespostas() {
      const botoes = document.querySelectorAll(".answer-btn");
      botoes.forEach(btn => btn.disabled = true);
    }

    function responderPergunta(indiceEscolhido) {
      clearInterval(timerInterval);
      bloquearRespostas();

      const atual = perguntas[posicaoAtual];
      const acertou = indiceEscolhido === atual.respostaCorreta;

      if (acertou) {
        pontuacao += 10;
        acertos++;
        resultadoEl.innerHTML = `<p>Voc√™ acertou! Parab√©ns!</p><p><em>Justificativa:</em> ${atual.justificativa}</p>`;
      } else {
        pontuacao -= 10;
        erros++;
        resultadoEl.innerHTML = `<p>Voc√™ errou.</p><p><em>Justificativa:</em> ${atual.justificativa}</p>`;
      }
      scoreEl.textContent = `Pontua√ß√£o: ${pontuacao}`;

      setTimeout(avancarPergunta, 3000);
    }

    function avancarPergunta() {
      posicaoAtual++;
      if (posicaoAtual >= perguntas.length) {
        finalizarJogo();
      } else {
        iniciarPergunta();
      }
    }

    function finalizarJogo() {
      questionEl.textContent = "";
      answersEl.innerHTML = "";
      timerEl.textContent = "";

      resultadoEl.innerHTML = `
        <h2>Fim do jogo!</h2>
        <p>Sua pontua√ß√£o final foi: ${pontuacao}</p>
        <p>Voc√™ acertou <strong>${acertos}</strong> de ${perguntas.length} perguntas.</p>
        <p>Erros: <strong>${erros}</strong></p>
        <p>Tempo esgotado em: <strong>${pulos}</strong> perguntas.</p>
      `;
      restartBtn.style.display = "inline-block"; // Mostrar bot√£o para reiniciar

      // Exibir o ranking
      showRanking(); // Chama a fun√ß√£o para mostrar o ranking
    }

    function saveScore(playerName, score) {
      let ranking = JSON.parse(localStorage.getItem("ranking")) || [];
      ranking.push({ name: playerName, score });
      ranking.sort((a, b) => b.score - a.score); // Ordenando do maior para o menor
      localStorage.setItem("ranking", JSON.stringify(ranking));
      showRanking();
    }

    function showRanking() {
      const ranking = JSON.parse(localStorage.getItem("ranking")) || [];
      rankingList.innerHTML = ""; // Limpar a lista de ranking atual
      ranking.forEach((player, index) => {
        const li = document.createElement("li");
        li.textContent = `${index + 1}. ${player.name} - ${player.score} pontos`;
        rankingList.appendChild(li);
      });
      document.getElementById("ranking").style.display = "block"; // Exibir o ranking
    }

    submitScoreBtn.addEventListener("click", () => {
      const playerName = playerNameInput.value.trim();
      if (playerName) {
        saveScore(playerName, pontuacao);
      } else {
        alert("Por favor, insira seu nome.");
      }
    });
  </script>
</body>

</html>
